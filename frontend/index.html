<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SquareYards Mumbai POC</title>

  <!-- Mapbox GL JS v3 (required for Standard style + setConfig) -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.css" rel="stylesheet" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.js"></script>

  <style>
    html, body { height:100%; margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; background:#fff; }
    #topbar {
      position: absolute; top: 8px; left: 8px; right: 360px; z-index: 10;
      background: rgba(255,255,255,0.92); backdrop-filter: saturate(180%) blur(6px);
      border: 1px solid #e5e7eb; border-radius: 10px; padding: 10px 10px 6px 10px;
      box-shadow: 0 6px 18px rgba(0,0,0,.06);
      display: grid; grid-template-columns: repeat(12, minmax(0,1fr)); gap: 8px; align-items: center;
    }
    #topbar .field { display:flex; gap:6px; align-items:center; }
    #topbar label { font-size:12px; color:#374151; }
    #topbar select, #topbar button { height:28px; font-size:12px; padding:2px 6px; }
    #apply { background:#2563eb; color:#fff; border:0; border-radius:6px; padding:4px 10px; cursor:pointer; }
    #apply:hover { filter: brightness(1.04); }

    #toggles { grid-column: span 12; display:flex; align-items:center; gap:14px; margin-top:4px; }
    #toggles label { font-size:12px; color:#111827; }

    #densityWrap { display:flex; align-items:center; gap:10px; }
    #statusWrap { display:flex; align-items:center; gap:6px; }
    #status { height:28px; font-size:12px; }

    #map { position: absolute; inset: 0 360px 0 0; }
    #right {
      position: absolute; top:8px; right:8px; bottom:8px; width: 340px; z-index:9;
      display:flex; flex-direction:column; gap:10px;
    }
    .panel {
      background: rgba(255,255,255,0.94); border:1px solid #e5e7eb; border-radius:10px; padding:10px;
      box-shadow: 0 6px 18px rgba(0,0,0,.06);
    }
    #legend { display:flex; align-items:center; flex-wrap:wrap; gap:8px; font-size:12px; color:#374151; }
    .legend-swatch { width:16px; height:10px; border-radius:2px; border:1px solid #e5e7eb; display:inline-block; }

    /* small badge buttons for status counts */
    .status-badge {
      display:inline-flex; align-items:center; gap:6px;
      background:#f3f4f6; border:1px solid #e5e7eb; color:#111827;
      border-radius:999px; padding:3px 8px; font-size:12px; margin-right:6px; margin-bottom:6px;
    }
    .status-dot { width:8px; height:8px; border-radius:999px; display:inline-block; }
    .dot-rtm { background:#16a34a; }           /* Ready to Move */
    .dot-uc  { background:#f59e0b; }           /* Under Construction */
    .dot-nl  { background:#8b5cf6; }           /* New Launch (example) */
    .dot-oth { background:#3b82f6; }           /* other */
  </style>
</head>
<body>
  <!-- Controls -->
  <div id="topbar" class="panel">
    <div class="field" style="grid-column: span 2;">
      <label for="metric">Metric</label>
      <select id="metric">
        <option value="yield">Yield</option>
        <option value="asking">Asking</option>
        <option value="registered">Registered</option>
        <option value="rent">Rent</option>
      </select>
    </div>

    <div class="field" style="grid-column: span 2;">
      <label for="month">Month</label>
      <select id="month"></select>
    </div>

    <div class="field" style="grid-column: span 2;">
      <label for="asset">Asset</label>
      <select id="asset"></select>
    </div>

    <div class="field" style="grid-column: span 1;">
      <label for="bhk">BHK</label>
      <select id="bhk"></select>
    </div>

    <div class="field" style="grid-column: span 2;">
      <label for="theme">Theme</label>
      <select id="theme">
        <option value="day">Day (Standard)</option>
        <option value="night">Night</option>
      </select>
    </div>

    <div class="field" style="grid-column: span 3;">
      <label for="mm">Micromarket</label>
      <select id="mm"></select>
    </div>

    <div class="field" style="grid-column: span 3;">
      <label for="loc">Locality</label>
      <select id="loc"></select>
    </div>

    <div class="field" style="grid-column: span 1; justify-content:flex-end">
      <button id="apply">Apply</button>
    </div>

    <div id="toggles">
      <label><input type="checkbox" id="toggle-mm" checked /> MM outline</label>
      <label><input type="checkbox" id="toggle-roads" checked /> Roads</label>
      <label><input type="checkbox" id="toggle-projects" /> Projects</label>

      <div id="densityWrap">
        <label><input type="checkbox" id="toggle-density" disabled /> Project density</label>
        <div id="statusWrap">
          <label for="status">Status</label>
          <select id="status" disabled>
            <option value="__all__">All</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- Map -->
  <div id="map"></div>

  <!-- Right panels -->
  <div id="right">
    <div id="stats" class="panel">Click a locality to see details here.</div>
    <div id="legend" class="panel"></div>
  </div>

  <script src="./app.js"></script>
</body>
</html>